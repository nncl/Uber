function getPageScroll(){var e;if(self.pageYOffset){e=self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){e=document.documentElement.scrollTop}else if(document.body){e=document.body.scrollTop}arrayPageScroll=new Array("",e);return arrayPageScroll}function getPageSize(){var e,t;if(window.innerHeight&&window.scrollMaxY){e=document.body.scrollWidth;t=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;t=document.body.scrollHeight}else{e=document.body.offsetWidth;t=document.body.offsetHeight}var n,r;if(self.innerHeight){n=self.innerWidth;r=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){n=document.documentElement.clientWidth;r=document.documentElement.clientHeight}else if(document.body){n=document.body.clientWidth;r=document.body.clientHeight}if(t<r){pageHeight=r}else{pageHeight=t}if(e<n){pageWidth=n}else{pageWidth=e}arrayPageSize=new Array(pageWidth,pageHeight,n,r);return arrayPageSize}function getKey(e){if(e==null){keycode=event.keyCode}else{keycode=e.which}key=String.fromCharCode(keycode).toLowerCase();if(key=="x"){}}function listenKey(){document.onkeypress=getKey}function showSelectBoxes(){var e=document.getElementsByTagName("select");for(i=0;i!=e.length;i++){e[i].style.visibility="visible"}}function hideSelectBoxes(){var e=document.getElementsByTagName("select");for(i=0;i!=e.length;i++){e[i].style.visibility="hidden"}}function showFlash(){var e=document.getElementsByTagName("object");for(i=0;i!=e.length;i++){e[i].style.visibility="visible"}var t=document.getElementsByTagName("embeds");for(i=0;i!=t.length;i++){t[i].style.visibility="visible"}}function hideFlash(){var e=document.getElementsByTagName("object");for(i=0;i!=e.length;i++){e[i].style.visibility="hidden"}var t=document.getElementsByTagName("embeds");for(i=0;i!=t.length;i++){t[i].style.visibility="hidden"}}function pause(e){var t=new Date;n=null;do{var n=new Date}while(n-t<e)}function initLightbox(){myLightbox=new Lightbox}var fileLoadingImage="img/loading.gif";var fileBottomNavCloseImage="img/closelabel.gif";var animate=true;var resizeSpeed=7;var borderSize=10;var imageArray=new Array;var activeImage;if(animate==true){overlayDuration=.2;if(resizeSpeed>10){resizeSpeed=10}if(resizeSpeed<1){resizeSpeed=1}resizeDuration=(11-resizeSpeed)*.15}else{overlayDuration=0;resizeDuration=0}Object.extend(Element,{getWidth:function(e){e=$(e);return e.offsetWidth},setWidth:function(e,t){e=$(e);e.style.width=t+"px"},setHeight:function(e,t){e=$(e);e.style.height=t+"px"},setTop:function(e,t){e=$(e);e.style.top=t+"px"},setSrc:function(e,t){e=$(e);e.src=t},setHref:function(e,t){e=$(e);e.href=t},setInnerHTML:function(e,t){e=$(e);e.innerHTML=t}});Array.prototype.removeDuplicates=function(){for(i=0;i<this.length;i++){for(j=this.length-1;j>i;j--){if(this[i][0]==this[j][0]){this.splice(j,1)}}}};Array.prototype.empty=function(){for(i=0;i<=this.length;i++){this.shift()}};var Lightbox=Class.create();Lightbox.prototype={initialize:function(){if(!document.getElementsByTagName){return}var e=document.getElementsByTagName("a");var t=document.getElementsByTagName("area");for(var n=0;n<e.length;n++){var r=e[n];var i=String(r.getAttribute("rel"));if(r.getAttribute("href")&&i.toLowerCase().match("lightbox")){r.onclick=function(){myLightbox.start(this);return false}}}for(var n=0;n<t.length;n++){var s=t[n];var i=String(s.getAttribute("rel"));if(s.getAttribute("href")&&i.toLowerCase().match("lightbox")){s.onclick=function(){myLightbox.start(this);return false}}}var o=document.getElementsByTagName("body").item(0);var u=document.createElement("div");u.setAttribute("id","overlay");u.style.display="none";u.onclick=function(){myLightbox.end()};o.appendChild(u);var a=document.createElement("div");a.setAttribute("id","lightbox");a.style.display="none";a.onclick=function(e){if(!e)var e=window.event;var t=Event.element(e).id;if(t=="lightbox"){myLightbox.end()}};o.appendChild(a);var f=document.createElement("div");f.setAttribute("id","outerImageContainer");a.appendChild(f);if(animate){Element.setWidth("outerImageContainer",250);Element.setHeight("outerImageContainer",250)}else{Element.setWidth("outerImageContainer",1);Element.setHeight("outerImageContainer",1)}var l=document.createElement("div");l.setAttribute("id","imageContainer");f.appendChild(l);var c=document.createElement("img");c.setAttribute("id","lightboxImage");l.appendChild(c);var h=document.createElement("div");h.setAttribute("id","hoverNav");l.appendChild(h);var p=document.createElement("a");p.setAttribute("id","prevLink");p.setAttribute("href","#");h.appendChild(p);var d=document.createElement("a");d.setAttribute("id","nextLink");d.setAttribute("href","#");h.appendChild(d);var v=document.createElement("div");v.setAttribute("id","loading");l.appendChild(v);var m=document.createElement("a");m.setAttribute("id","loadingLink");m.setAttribute("href","#");m.onclick=function(){myLightbox.end();return false};v.appendChild(m);var g=document.createElement("img");g.setAttribute("src",fileLoadingImage);m.appendChild(g);var y=document.createElement("div");y.setAttribute("id","imageDataContainer");y.className="clearfix";a.appendChild(y);var b=document.createElement("div");b.setAttribute("id","imageData");y.appendChild(b);var w=document.createElement("div");w.setAttribute("id","imageDetails");b.appendChild(w);var E=document.createElement("span");E.setAttribute("id","caption");w.appendChild(E);var S=document.createElement("span");S.setAttribute("id","numberDisplay");w.appendChild(S);var x=document.createElement("div");x.setAttribute("id","bottomNav");b.appendChild(x);var T=document.createElement("a");T.setAttribute("id","bottomNavClose");T.setAttribute("href","#");T.onclick=function(){myLightbox.end();return false};x.appendChild(T);var N=document.createElement("img");N.setAttribute("src",fileBottomNavCloseImage);T.appendChild(N)},start:function(e){function t(e){var t=e.getAttribute("title");var n=t!=null&&t!=""?e.getAttribute("rev"):null;return ddimageTitleFinal=n!=null&&n!=""?'<a href="'+n+'" class="ddcaptionurl">'+t+"</a>":t}hideSelectBoxes();hideFlash();var n=getPageSize();Element.setHeight("overlay",n[1]);new Effect.Appear("overlay",{duration:overlayDuration,from:0,to:.8});imageArray=[];imageNum=0;if(!document.getElementsByTagName){return}var r=document.getElementsByTagName("a");if(e.getAttribute("rel")=="lightbox"){imageArray.push(new Array(e.getAttribute("href"),t(e)))}else{for(var i=0;i<r.length;i++){var s=r[i];if(s.getAttribute("href")&&s.getAttribute("rel")==e.getAttribute("rel")){imageArray.push(new Array(s.getAttribute("href"),t(s)))}}imageArray.removeDuplicates();while(imageArray[imageNum][0]!=e.getAttribute("href")){imageNum++}}var o=getPageScroll();var u=o[1]+n[3]/10;Element.setTop("lightbox",u);Element.show("lightbox");this.changeImage(imageNum)},changeImage:function(e){activeImage=e;if(animate){Element.show("loading")}Element.hide("lightboxImage");Element.hide("hoverNav");Element.hide("prevLink");Element.hide("nextLink");Element.hide("imageDataContainer");Element.hide("numberDisplay");imgPreloader=new Image;imgPreloader.onload=function(){Element.setSrc("lightboxImage",imageArray[activeImage][0]);myLightbox.resizeImageContainer(imgPreloader.width,imgPreloader.height)};imgPreloader.src=imageArray[activeImage][0]},resizeImageContainer:function(e,t){this.widthCurrent=Element.getWidth("outerImageContainer");this.heightCurrent=Element.getHeight("outerImageContainer");var n=e+borderSize*2;var r=t+borderSize*2;this.xScale=n/this.widthCurrent*100;this.yScale=r/this.heightCurrent*100;wDiff=this.widthCurrent-n;hDiff=this.heightCurrent-r;if(!(hDiff==0)){new Effect.Scale("outerImageContainer",this.yScale,{scaleX:false,duration:resizeDuration,queue:"front"})}if(!(wDiff==0)){new Effect.Scale("outerImageContainer",this.xScale,{scaleY:false,delay:resizeDuration,duration:resizeDuration})}if(hDiff==0&&wDiff==0){if(navigator.appVersion.indexOf("MSIE")!=-1){pause(250)}else{pause(100)}}Element.setHeight("prevLink",t);Element.setHeight("nextLink",t);Element.setWidth("imageDataContainer",n);this.showImage()},showImage:function(){Element.hide("loading");new Effect.Appear("lightboxImage",{duration:resizeDuration,queue:"end",afterFinish:function(){myLightbox.updateDetails()}});this.preloadNeighborImages()},updateDetails:function(){Element.show("caption");Element.setInnerHTML("caption",imageArray[activeImage][1]);if(imageArray.length>1){Element.show("numberDisplay");Element.setInnerHTML("numberDisplay","Imagem "+eval(activeImage+1)+" de "+imageArray.length)}new Effect.Parallel([new Effect.SlideDown("imageDataContainer",{sync:true,duration:resizeDuration,from:0,to:1}),new Effect.Appear("imageDataContainer",{sync:true,duration:resizeDuration})],{duration:resizeDuration,afterFinish:function(){var e=getPageSize();Element.setHeight("overlay",e[1]);myLightbox.updateNav()}})},updateNav:function(){Element.show("hoverNav");if(activeImage!=0){Element.show("prevLink");document.getElementById("prevLink").onclick=function(){myLightbox.changeImage(activeImage-1);return false}}if(activeImage!=imageArray.length-1){Element.show("nextLink");document.getElementById("nextLink").onclick=function(){myLightbox.changeImage(activeImage+1);return false}}this.enableKeyboardNav()},enableKeyboardNav:function(){document.onkeydown=this.keyboardAction},disableKeyboardNav:function(){document.onkeydown=""},keyboardAction:function(e){if(e==null){keycode=event.keyCode;escapeKey=27}else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if(key=="x"||key=="o"||key=="c"||keycode==escapeKey){myLightbox.end()}else if(key=="p"||keycode==37){if(activeImage!=0){myLightbox.disableKeyboardNav();myLightbox.changeImage(activeImage-1)}}else if(key=="n"||keycode==39){if(activeImage!=imageArray.length-1){myLightbox.disableKeyboardNav();myLightbox.changeImage(activeImage+1)}}},preloadNeighborImages:function(){if(imageArray.length-1>activeImage){preloadNextImage=new Image;preloadNextImage.src=imageArray[activeImage+1][0]}if(activeImage>0){preloadPrevImage=new Image;preloadPrevImage.src=imageArray[activeImage-1][0]}},end:function(){this.disableKeyboardNav();Element.hide("lightbox");new Effect.Fade("overlay",{duration:overlayDuration});showSelectBoxes();showFlash()}};Event.observe(window,"load",initLightbox,false)